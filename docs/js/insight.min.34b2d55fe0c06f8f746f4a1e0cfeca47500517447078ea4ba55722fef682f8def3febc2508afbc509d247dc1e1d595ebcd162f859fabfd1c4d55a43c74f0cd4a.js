(function(e,r){var t=e(".ins-search"),h=t.find(".ins-search-input"),n=t.find(".ins-section-wrapper"),i=t.find(".ins-section-container");t.parent().remove(".ins-search"),e("body").append(t);function y(t){return e("<section>").addClass("ins-section").append(e("<header>").addClass("ins-section-header").text(t))}function d(o,t,n,s,i){return e("<div>").addClass("ins-selectable").addClass("ins-search-item").append(e("<header>").append(e("<i>").addClass("icon").addClass("icon-"+o)).append(t!=null&&t!=''?t:r.TRANSLATION.UNTITLED).append(n?e("<span>").addClass("ins-slug").text(n):null)).append(s?e("<p>").addClass("ins-search-preview").text(s):null).attr("data-url",i)}function j(e,t){var n,s;if(t.length===0)return null;switch(s=r.TRANSLATION[e],e){case"POSTS":n=t.map(function(e){return d("file",e.title,null,e.content.slice(0,150),e.uri)});break;case"CATEGORIES":case"TAGS":n=t.map(function(t){return d(e==="CATEGORIES"?"folder":"tag",t.title,'',null,t.uri)});break;default:return null}return y(s).append(n)}function l(e){return e.split(" ").filter(function(e){return!!e}).map(function(e){return e.toUpperCase()})}function s(n,e,s){var i=!1,t=l(n),o=t.filter(function(t){var n=s.filter(function(n){if(!e.hasOwnProperty(n))return!1;if(e[n].toUpperCase().indexOf(t)>-1)return!0});return n.length>0});return o.length===t.length}function _(e){return{POST:function(t){return s(e,t,["title","content"])},PAGE:function(t){return s(e,t,["title","content"])},CATEGORY:function(t){return s(e,t,["title"])},TAG:function(t){return s(e,t,["title"])}}}function o(n,e,s,o){var t=0;return l(n).forEach(function(n){var i=new RegExp(n,"img");s.forEach(function(n,a){if(e.hasOwnProperty(n)){var s=e[n].match(i);t+=s?s.length*o[a]:0}})}),t}function b(e){return{POST:function(t){return o(e,t,["title","content"],[3,1])},PAGE:function(t){return o(e,t,["title","content"],[3,1])},CATEGORY:function(t){return o(e,t,["title"],[1])},TAG:function(t){return o(e,t,["title"],[1])}}}function v(t,s){var e=b(s),n=_(s),o=t.posts,i=t.tags,a=t.categories;return{posts:o.filter(n.POST).sort(function(t,n){return e.POST(n)-e.POST(t)}).slice(0,5),categories:a.filter(n.CATEGORY).sort(function(t,n){return e.CATEGORY(n)-e.CATEGORY(t)}).slice(0,5),tags:i.filter(n.TAG).sort(function(t,n){return e.TAG(n)-e.TAG(t)}).slice(0,5)}}function p(e){i.empty();for(var t in e)i.append(j(t.toUpperCase(),e[t]))}function g(e){if(e.length===0)return;var s=n[0].clientHeight,o=e.position().top-n.scrollTop(),t=e[0].clientHeight+e.position().top;t>s+n.scrollTop()&&n.scrollTop(t-n[0].clientHeight),o<0&&n.scrollTop(e.position().top)}function c(o){var s,t=e.makeArray(i.find(".ins-selectable")),n=-1;t.forEach(function(t,s){if(e(t).hasClass("active")){n=s;return}}),s=(t.length+n+o)%t.length,e(t[n]).removeClass("active"),e(t[s]).addClass("active"),g(e(t[s]))}function m(e){e&&e.length&&(location.href=e.attr("data-url"))}e.getJSON(r.CONTENT_URL,function(n){location.hash.trim()==="#ins-search"&&t.addClass("show"),h.on("input",function(){var t=e(this).val();p(v(n,t))}),h.trigger("input")});let a=0,u=null;function f(e){if(a===0){a+=1,u=setTimeout(()=>a=0,500);return}a=0,clearTimeout(u),e==="show"?t.addClass("show"):t.removeClass("show")}e(document).on("click focus",".search-form-input",function(){t.addClass("show"),t.find(".ins-search-input").focus()}).on("click",".ins-search-item",function(){m(e(this))}).on("click",".ins-close",function(){t.removeClass("show")}).on("keydown",function(e){if(!t.hasClass("show")){switch(e.code){case"Shift","ShiftRight","ShiftLeft":f("show")}return}switch(e.code){case"Escape":t.removeClass("show");break;case"ArrowUp":c(-1);break;case"ArrowDown":c(1);break;case"Enter":m(i.find(".ins-selectable.active").eq(0));break;case"Shift","ShiftRight","ShiftLeft":f("close")}})})(jQuery,window.INSIGHT_CONFIG)